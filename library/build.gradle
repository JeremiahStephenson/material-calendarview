buildscript {
    repositories {
        google()
        jcenter()

    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.3.2'
        classpath 'com.github.ben-manes:gradle-versions-plugin:0.21.0'
        classpath 'com.github.dcendents:android-maven-gradle-plugin:2.1'
//        classpath ('com.dicedmelon.gradle:jacoco-android:0.1.3') {
//            exclude group: 'org.codehaus.groovy', module: 'groovy-all'
//        }
    }
}

apply plugin: 'com.android.library'
apply plugin: 'maven'
//apply plugin: 'jacoco-android'
apply plugin: 'com.github.ben-manes.versions' // ./gradlew dependencyUpdates -Drevision=release

def versionMajor = 2
def versionMinor = 0
def versionPatch = 1
def versionBuild = 19
def versionMajorMinorPatch = "${versionMajor}.${versionMinor}.${versionPatch}"

android {
  compileSdkVersion 28

  defaultConfig {
      minSdkVersion 21
      targetSdkVersion 28

      versionCode Integer.parseInt(String.format("%d%02d%02d%02d", versionMajor, versionMinor, versionPatch, versionBuild))
      versionName versionMajorMinorPatch

      vectorDrawables.useSupportLibrary = true

      testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
  }

    buildTypes {
        release {
            minifyEnabled false
        }
        beta {

        }
        debug {

        }
    }

  lintOptions {
    abortOnError false
  }

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
  }
}

dependencies {

    implementation "com.jakewharton.threetenabp:threetenabp:1.1.2"
    implementation "androidx.legacy:legacy-support-v4:1.0.0"
    implementation "androidx.annotation:annotation:1.0.2"
    implementation "androidx.appcompat:appcompat:1.0.2"


    testImplementation "junit:junit:4.12"
    testImplementation "com.android.support.test:runner:1.0.2"
    testImplementation "com.android.support.test:rules:1.0.2"

    // Hamcrest
    testImplementation "org.hamcrest:hamcrest-core:1.3"
    testImplementation "org.hamcrest:hamcrest-library:1.3"
    testImplementation "org.hamcrest:hamcrest-integration:1.3"

}

repositories {
    mavenCentral()
    google()
    maven {
        url 'http://mobile.janecorp.com/android/aar'
    }
    jcenter {
        url 'http://jcenter.bintray.com/'
    }
}

uploadArchives { // ./gradlew clean build uploadArchives
    repositories.mavenDeployer {
        repository(url: mobileApiRepositoryUrl)
        //uniqueVersion = true
        pom.project {
            groupId 'com.prolificinteractive.materialcalendarview'
            artifactId 'calendar'
            version versionMajorMinorPatch
            packaging 'aar'
        }
    }
}

//tasks.withType(Javadoc) {
//  options.addStringOption('Xdoclint:none', '-quiet')
//  options.addStringOption('encoding', 'UTF-8')
//  options.addStringOption('charSet', 'UTF-8')
//}
//
//android.libraryVariants.all { variant ->
//  task("generate${variant.name.capitalize()}Javadoc", type: Javadoc) {
//    title "Material CalendarView ${version}"
//    description "Generates Javadoc for $variant.name."
//    source = variant.javaCompiler.source
//    doFirst {
//      classpath = files(variant.javaCompiler.classpath.files, project.android.getBootClasspath())
//    }
//    exclude '**/BuildConfig.java'
//    exclude '**/R.java'
//    options {
//      links "http://docs.oracle.com/javase/7/docs/api/"
//      linksOffline "http://d.android.com/reference", "${android.sdkDirectory}/docs/reference"
//    }
//  }
//}